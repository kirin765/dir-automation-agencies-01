---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { getVerified } from '../../scripts/process-data';

const featuredListings = getVerified().filter((listing) => listing.isFeaturedActive);
---

<Layout title="Featured Agencies - AI Automation Agencies Directory">
  <Header />

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold mb-4">Featured Agencies</h1>
      <p class="text-xl text-slate-400">Premium placements ranked by active feature status and listing priority.</p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-14">
      {featuredListings.map(listing => (
        <a
          href={`/listing/${listing.slug}`}
          data-track="listing_click"
          data-listing-slug={listing.slug}
          class="block p-6 bg-slate-800 border border-slate-700 rounded-xl card-hover"
        >
          <div class="flex justify-between items-start mb-3">
            <h2 class="font-semibold text-lg">{listing.name}</h2>
            <span class="text-xs px-2 py-1 rounded bg-green-500/20 text-green-400">â˜… Featured</span>
          </div>
          <p class="text-slate-400 text-sm mb-3">{listing.description}</p>
          <p class="text-xs text-slate-500 mb-2">Featured until: {listing.featuredUntil ? new Date(listing.featuredUntil).toLocaleDateString() : 'ongoing'}</p>
          <p class="text-sm text-green-400">Priority Score: {listing.priorityScore}</p>
        </a>
      ))}
    </div>

    <section class="bg-slate-800 border border-slate-700 rounded-2xl p-8 max-w-3xl mx-auto">
      <h2 class="text-2xl font-bold mb-3">Want Featured Placement?</h2>
      <p class="text-slate-400 mb-6">Submit your listing claim first, then request featured placement from your profile team.</p>
      <div class="flex gap-4">
        <a
          href="/claim"
          data-track="cta_click"
          class="px-6 py-3 bg-green-500 hover:bg-green-600 text-black font-semibold rounded-xl"
        >
          Claim Listing
        </a>
        <a
          href="/contact"
          data-track="cta_click"
          class="px-6 py-3 border border-slate-600 hover:border-white text-white font-semibold rounded-xl"
        >
          Contact Team
        </a>
      </div>
    </section>
  </main>

  <Footer />
</Layout>
